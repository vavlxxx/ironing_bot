from src.schemas.users import UserDTO
from src.schemas.orders import OrderDTO
from src.config import settings


BUTTON_MY_ORDERS = "üìù –ú–æ–∏ –∑–∞–∫–∞–∑—ã"
BUTTON_CHANGE_CODE = "‚úâÔ∏è –û—Ç–ø—Ä–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π –∫–æ–¥"
BUTTON_SEND_PHONE = "üì± –û—Ç–ø—Ä–∞–≤–∏—Ç—å"
BUTTON_CHANGE_PHONE = "üì± –ò–∑–º–µ–Ω–∏—Ç—å –Ω–æ–º–µ—Ä"

COMMAND_ORDERS = "orders"

MESSAGE_CHANGE_PHONE = """
–ò–∑–º–µ–Ω–µ–Ω–∏–µ –Ω–æ–º–µ—Ä–∞!
üëá –•–æ—Ä–æ—à–æ, –ø–æ–¥–µ–ª–∏—Ç–µ—Å—å —Å–≤–æ–∏–º –Ω–æ–≤—ã–º –Ω–æ–º–µ—Ä–æ–º —Ç–µ–ª–µ—Ñ–æ–Ω–∞:
"""

MESSAGE_GREETINGS = """
üåü –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ "–ü–æ–≥–ª–∞–∂—É"!

–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–∞—è –≥–ª–∞–∂–∫–∞ –æ–¥–µ–∂–¥—ã —Å –¥–æ—Å—Ç–∞–≤–∫–æ–π –ø–æ –≥–æ—Ä–æ–¥—É.

üöÄ **–ë—ã—Å—Ç—Ä–æ:** –ì–æ—Ç–æ–≤–æ –∑–∞ 24 —á–∞—Å–∞
üí∞ **–í—ã–≥–æ–¥–Ω–æ:** –ù–∞–∫–æ–ø–∏—Ç–µ–ª—å–Ω—ã–µ –±–æ–Ω—É—Å—ã  
üèÜ **–ö–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–æ:** –û–ø—ã—Ç–Ω—ã–µ –º–∞—Å—Ç–µ—Ä–∞

–î–∞–≤–∞–π—Ç–µ –Ω–∞—á–Ω–µ–º!
üëá –î–ª—è –Ω–∞—á–∞–ª–∞ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤—å—Ç–µ —Å–≤–æ–π –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞:
"""

MESSAGE_REGISTRATION_OVER = f"""
üéâ –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞!

üåü –ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º, —Ç–µ–ø–µ—Ä—å –≤—ã –∫–ª–∏–µ–Ω—Ç "–ü–æ–≥–ª–∞–∂—É"!

üìã **–ß—Ç–æ –¥–∞–ª—å—à–µ?**

1Ô∏è‚É£ –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ —Å–ø–∏—Å–æ–∫ —Å–≤–æ–∏—Ö –∑–∞–∫–∞–∑–æ–≤ - /{COMMAND_ORDERS}
2Ô∏è‚É£ –î–æ–∂–¥–∏—Ç–µ—Å—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ —Å—Ç–∞—Ç—É—Å–∞—Ö —Å–≤–æ–∏—Ö –∑–∞–∫–∞–∑–æ–≤
"""

MESSAGE_RETURN_BACK = f"""
–° –≤–æ–∑–≤—Ä–∞—â–µ–Ω–∏–µ–º! üëã

–†–∞–¥—ã –≤–∏–¥–µ—Ç—å –≤–∞—Å —Å–Ω–æ–≤–∞ –≤ "–ü–æ–≥–ª–∞–∂—É"! 
–ß—Ç–æ –±—É–¥–µ–º –≥–ª–∞–¥–∏—Ç—å —Å–µ–≥–æ–¥–Ω—è? üòä

/{COMMAND_ORDERS} - –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ —Å–≤–æ–∏—Ö –∑–∞–∫–∞–∑–æ–≤
"""

def get_orders_list_message(user: UserDTO, current_orders: int, offset: int):
    return f"""
üìã **–ò—Å—Ç–æ—Ä–∏—è –≤–∞—à–∏—Ö –∑–∞–∫–∞–∑–æ–≤**

–ó–¥–µ—Å—å –≤—ã –º–æ–∂–µ—Ç–µ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ —Å–≤–æ–∏ –∑–∞–∫–∞–∑—ã, –∏—Ö —Å—Ç–∞—Ç—É—Å—ã –∏ –¥–µ—Ç–∞–ª–∏.

üìä **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:**
‚Ä¢ –í—Å–µ–≥–æ –∑–∞–∫–∞–∑–æ–≤: {user.total_orders}
‚Ä¢ –ê–∫—Ç–∏–≤–Ω—ã—Ö: {user.active_orders}
‚Ä¢ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö: {user.completed_orders}

üí° **–ü–æ–¥—Å–∫–∞–∑–∫–∞:** –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –Ω–æ–º–µ—Ä –∑–∞–∫–∞–∑–∞, —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏, —Å—Ç–∞—Ç—É—Å –∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ–ø–ª–∞—Ç—ã.

üëá **–í–∞—à–∏ –∑–∞–∫–∞–∑—ã ({offset+current_orders}/{user.total_orders})**
"""

TEXT_AWAITING_PAYMENT = '‚è∞ –ó–∞–∫–∞–∑ –≥–æ—Ç–æ–≤ –∫ –æ–ø–ª–∞—Ç–µ, –Ω–æ —Å—Å—ã–ª–∫–∞ –ø–æ–∫–∞ –µ—â—ë –Ω–µ –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω–∞. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –æ–∂–∏–¥–∞–∏ÃÜ—Ç–µ... '
TEXT_AWAITING_RECEIPT = '‚è∞ –ó–∞–∫–∞–∑ —É—Å–ø–µ—à–Ω–æ –æ–ø–ª–∞—á–µ–Ω! –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –æ–∂–∏–¥–∞–∏ÃÜ—Ç–µ –ø–æ–∫–∞ —Å–∫–∞—á–∏–≤–∞–µ—Ç—Å—è –∫–≤–∏—Ç–∞–Ω—Ü–∏—è... '

def get_order_description(schema: OrderDTO, statuses) -> str:
    return f"""
üîç **–ó–∞–∫–∞–∑: {schema.order_number}**

üìÜ –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è: {schema.created_at}
üìç –ê–¥—Ä–µ—Å –¥–æ—Å—Ç–∞–≤–∫–∏: {schema.address_name}
‚ö° –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å: {statuses.get(schema.status_id, "–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ")}

üì¶ –î–µ—Ç–∞–ª–∏ –∑–∞–∫–∞–∑–∞
- –û–±—â–∏–π –≤–µ—Å: {schema.total_weight_kg} –∫–≥
- –¢–∞—Ä–∏—Ñ: {schema.tariff_name}
- –¶–µ–Ω–∞ –∑–∞ –∫–≥: {schema.tariff_price_per_kg} ‚ÇΩ/–∫–≥

üí∞ –ò—Ç–æ–≥–æ–≤–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å: {schema.total_price}‚ÇΩ

{ TEXT_AWAITING_PAYMENT if schema.payment_url is None and schema.status_id == statuses.get('not_paid', 0) else ''}
{ TEXT_AWAITING_RECEIPT if schema.receipt_url is None and schema.status_id == statuses.get('completed', 0) else ''}
"""

def get_code_input_message(phone):
    return f"""
‚úâÔ∏è –ù–∞ –Ω–æ–º–µ—Ä {phone} –±—ã–ª –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –∫–æ–¥. –í–≤–µ–¥–∏—Ç–µ –µ–≥–æ –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏.
{'–°–µ–π—á–∞—Å –∞–∫—Ç–∏–≤–µ–Ω —Ç–µ—Å—Ç–æ–≤—ã–π —Ä–µ–∂–∏–º, –∫–æ–¥: `1234`' if settings.SMSRU_MODE == 'TEST' else ''}
"""
